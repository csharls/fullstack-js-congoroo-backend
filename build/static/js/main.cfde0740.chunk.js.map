{"version":3,"sources":["Filter.js","PersonForm.js","Persons.js","Notification.js","services/persons/persons.js","App.js","index.js"],"names":["Filter","handleSearch","onChange","PersonForm","handleSubmit","handleNameChange","handlePhoneChange","newName","newPhone","onSubmit","value","Person","name","number","Persons","persons","searchText","handler","filter","p","toLowerCase","includes","map","onClick","id","Notification","message","type","className","baseUrl","App","useState","setPersons","setNewName","setNewPhone","setSearchText","appMessage","setappMessage","useEffect","axios","get","then","res","data","fillAppMessage","setTimeout","e","target","preventDefault","newObject","duplicated","find","window","confirm","person","patch","updatePerson","prevPersons","catch","err","post","concat","phone","parseInt","delete","status","deletePerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAQeA,EARA,SAAC,GAAoB,IAAnBC,EAAkB,EAAlBA,aACf,OACE,gCACE,qDADF,IACiC,uBAAOC,SAAUD,QCevCE,EAlBI,SAAC,GAA4E,IAA3EC,EAA0E,EAA1EA,aAAcC,EAA4D,EAA5DA,iBAAkBC,EAA0C,EAA1CA,kBAAmBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,SAG/E,OACE,uBAAMC,SAAUL,EAAhB,UACA,yCACQ,uBAAOF,SAAUG,EAAkBK,MAAOH,OAElD,0CACS,uBAAOL,SAAUI,EAAmBI,MAAOF,OAEpD,8BACE,+CCZAG,EAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAT,OACb,iCACGD,EADH,IACUC,MAmBGC,EAfC,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,QACtC,OACE,8BACGF,EACEG,QAAO,SAACC,GAAD,OAAOA,EAAEP,KAAKQ,cAAcC,SAASL,MAC5CM,KAAI,SAACH,GAAD,OACH,8BACA,cAAC,EAAD,CAASP,KAAMO,EAAEP,KAAMC,OAAQM,EAAEN,SACjC,wBAAQU,QAASN,EAASP,MAAOS,EAAEK,GAAnC,sBAFQL,EAAEK,UCILC,EAhBM,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,KAC/B,MAAgB,KAAZD,EACK,KAIP,qBAAKE,UAAU,MAAf,SACE,qBAAKA,UAAS,gBAAWD,GAAzB,SACE,qBAAKC,UAAU,aAAf,SACCF,S,gBCPHG,EAAU,eCgJDC,EAxIH,WACV,MAAgCC,mBAAS,IAAzC,mBAAQhB,EAAR,KAAiBiB,EAAjB,KAEA,EAAgCD,mBAAS,IAAzC,mBAAQxB,EAAR,KAAiB0B,EAAjB,KAEA,EAAgCF,mBAAS,IAAzC,mBAAOvB,EAAP,KAAiB0B,EAAjB,KAEA,EAAoCH,mBAAS,IAA7C,mBAAOf,EAAP,KAAmBmB,EAAnB,KAEA,EAAoCJ,mBAAS,CAACJ,KAAK,GAAID,QAAQ,KAA/D,mBAAOU,EAAP,KAAmBC,EAAnB,KAEAC,qBAAU,WDhBHC,IAAMC,IAAIX,GAChBY,MAAK,SAAAC,GAEJ,OADeA,EAARC,QCgBNF,MAAK,SAAA1B,GAAO,OAAIiB,EAAWjB,QAC5B,IAIF,IAqFM6B,EAAiB,SAACjB,EAAMD,GAC5BW,EACE,CACEV,KAAMA,EACND,QAASA,IAGbmB,YAAW,kBAAKR,EAAc,CAACV,KAAK,GAAID,QAAQ,OAAM,MAIxD,OACE,gCACE,cAAC,EAAD,CAAcA,QAASU,EAAWV,QAASC,KAAMS,EAAWT,OAC5D,kCACE,cAAC,EAAD,CAAQ1B,aAzCO,SAAC6C,GACpBX,EAAcW,EAAEC,OAAOrC,YA0CrB,oCACE,2CACA,mDACA,cAAC,EAAD,CAAYN,aAzGG,SAAC0C,GACpBA,EAAEE,iBAEF,IDnBwBC,ECmBlBC,EAAanC,EAAQoC,MAAM,SAAAhC,GAAC,OAAIA,EAAEP,OAASL,KAE9C2C,EACcE,OAAOC,QAAP,UACV9C,EADU,4EDLM,SAAC+C,EAAQ9B,GAClC,OAAOe,IAAMgB,MAAN,UAAe1B,EAAf,YAA0BL,GAAK8B,GACrCb,MAAK,SAAAC,GAEJ,OADcA,EAAPC,QCOHa,CADe,CAAE3C,OAAQL,GACJ0C,EAAW1B,IAC7BiB,MAAK,SAACa,GAAD,OACJtB,GAAW,SAACyB,GAAD,OACTA,EAAYnC,KAAI,SAACH,GAAD,OAAQA,EAAEK,KAAO8B,EAAO9B,GAAKL,EAAImC,WAGpDb,MAAK,WACJG,EACE,UADY,kBAEDM,EAAWtC,KAFV,oBAKf8C,OAAM,SAACC,GACNf,EACE,QADY,kBAEDM,EAAWtC,KAFV,wCDxCEqC,ECgDJ,CAChBrC,KAAML,EACNM,OAAQL,GDjDP+B,IAAMqB,KAAK/B,EAASoB,GAC1BR,MAAM,SAAAC,GAEL,OADeA,EAARC,SCkDJF,MACC,SAAAa,GAAM,OAAItB,GAAW,SAAAyB,GAAW,OAAIA,EAAYI,OAAOP,SAExDb,MACC,WACEG,EAAe,UAAD,kBAAuBrC,EAAvB,sCAIpB0B,EAAW,IACXA,EAAW,KA0DiC5B,iBAtDrB,SAACyC,GACxBb,EAAWa,EAAEC,OAAOrC,QAqD4DJ,kBAlDxD,SAACwC,GACzBZ,EAAYY,EAAEC,OAAOrC,QAiDiGE,KAAML,EAASuD,MAAOtD,OAE1I,oCACE,yCACA,cAAC,EAAD,CAASO,QAASA,EAASC,WAAYA,EAAYC,QA/CrC,SAAC6B,GACnB,IAAMtB,EAAKuC,SAASjB,EAAEC,OAAOrC,OACtBE,EAAQG,EAAQG,QAAO,SAAAC,GAAC,OAAEA,EAAEK,KAAKA,KAAI,GAArCZ,KAEQwC,OAAOC,QAAP,iBAAyBzC,EAAzB,OD1ES,SAACY,GAC3B,OAAOe,IAAMyB,OAAN,UAAgBnC,EAAhB,YAA2BL,IACjCiB,MAAK,SAAAC,GAEF,OADgBA,EAAVuB,UCyENC,CAAa1C,GACZiB,MACE,SAAAwB,GACe,MAATA,GACHjC,EAAWjB,EAAQG,QAAO,SAAAC,GAAC,OAAIA,EAAEK,KAAKA,SAE3CiB,MACC,WACEG,EAAe,UAAD,kBAAuBhC,EAAvB,+BAGjB8C,OAAM,SAAAC,GACLf,EAAe,QAAD,4CCvGtBuB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.cfde0740.chunk.js","sourcesContent":["const Filter = ({handleSearch}) => {\r\n  return (\r\n    <div>\r\n      <span>filter shown with</span> <input onChange={handleSearch} />\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","const PersonForm = ({handleSubmit, handleNameChange, handlePhoneChange, newName, newPhone}) => {\r\n  \r\n  \r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n    <div>\r\n      name: <input onChange={handleNameChange} value={newName}/>\r\n    </div>\r\n    <div>\r\n      phone: <input onChange={handlePhoneChange} value={newPhone}/>\r\n    </div>\r\n    <div>\r\n      <button>add</button>\r\n    </div>\r\n  </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","const Person = ({ name, number }) => (\r\n  <span>\r\n    {name} {number}\r\n  </span>\r\n);\r\n\r\nconst Persons = ({ persons, searchText, handler }) => {\r\n  return (\r\n    <div>\r\n      {persons\r\n        .filter((p) => p.name.toLowerCase().includes(searchText))\r\n        .map((p) => (\r\n          <p key={p.id}>\r\n          <Person  name={p.name} number={p.number} />\r\n          <button onClick={handler} value={p.id}>delete</button>\r\n          </p>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","const Notification = ({ message, type }) => {\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      <div className={`alert ${type}`}>\r\n        <div className=\"alert-body\">\r\n        {message}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nexport const getAllPersons = () => {\r\n  return axios.get(baseUrl)\r\n  .then(res => {\r\n    const {data} = res\r\n    return data\r\n  })\r\n}\r\n\r\nexport const savePerson = ( newObject ) => {\r\n  return axios.post(baseUrl, newObject)\r\n  .then( res => {\r\n    const {data} = res\r\n    return data\r\n  })\r\n}\r\n\r\nexport const deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n  .then(res => {\r\n      const{status} = res\r\n      return status\r\n    }\r\n  )\r\n}\r\n\r\nexport const updatePerson =(person, id) => {\r\n  return axios.patch(`${baseUrl}/${id}`,person)\r\n  .then(res => {\r\n    const {data} =res\r\n    return data\r\n  })\r\n}","\r\nimport React, { useState, useEffect } from 'react'\r\n\r\n\r\n\r\nimport Filter from './Filter.js'\r\nimport PersonForm from './PersonForm.js'\r\nimport Persons from './Persons.js'\r\nimport Notification from './Notification.js'\r\nimport { getAllPersons, savePerson, deletePerson, updatePerson} from './services/persons/persons.js'\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n\r\n  const [ newName, setNewName ] = useState('')\r\n\r\n  const [newPhone, setNewPhone] = useState('')\r\n\r\n  const [searchText, setSearchText] = useState('')\r\n\r\n  const [appMessage, setappMessage] = useState({type:'', message:''})\r\n\r\n  useEffect(()=>{\r\n    getAllPersons()\r\n    .then(persons => setPersons(persons))\r\n  },[])\r\n\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const duplicated = persons.find( p => p.name === newName)\r\n\r\n    if(duplicated){\r\n      const modify = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n      if (modify) {\r\n        const person = { number: newPhone };\r\n        updatePerson(person, duplicated.id)\r\n          .then((person) =>\r\n            setPersons((prevPersons) =>\r\n              prevPersons.map((p) => (p.id !== person.id ? p : person))\r\n            )\r\n          )\r\n          .then(() => {\r\n            fillAppMessage(\r\n              \"success\",\r\n              `Contact ${duplicated.name} was updated`\r\n            );\r\n          })\r\n          .catch((err) => {\r\n            fillAppMessage(\r\n              \"error\",\r\n              `Contact ${duplicated.name} was already remove from server`\r\n            );\r\n          });\r\n      }\r\n    }\r\n    else{\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newPhone\r\n      }\r\n      savePerson(newPerson)\r\n      .then(\r\n        person => setPersons(prevPersons => prevPersons.concat(person))\r\n      )\r\n      .then(\r\n        ()=>{\r\n          fillAppMessage('success', `Contact ${newName} was added to the contact list` )\r\n        }\r\n      )\r\n    }\r\n    setNewName('')\r\n    setNewName('')\r\n\r\n  }\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value)\r\n  }\r\n\r\n  const handlePhoneChange = (e) => {\r\n    setNewPhone(e.target.value)\r\n  }\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchText(e.target.value)\r\n  }\r\n  const handleClick = (e) => {\r\n    const id = parseInt(e.target.value)\r\n    const {name} = persons.filter(p=>p.id===id)[0]\r\n\r\n    const result = window.confirm(`Delete ${name}?`);\r\n    if(result){\r\n      deletePerson(id)\r\n      .then(\r\n         status => {\r\n           if (status===204)\r\n            setPersons(persons.filter(p => p.id!==id))\r\n        })\r\n      .then(\r\n        ()=>{\r\n          fillAppMessage('success', `Contact ${name} was remove from server` )\r\n        }\r\n      )\r\n      .catch(err =>{\r\n        fillAppMessage('error', `Something wrong happened...` )\r\n      })\r\n    }\r\n  }\r\n\r\n  const fillAppMessage = (type, message) => {\r\n    setappMessage(\r\n      {\r\n        type: type,\r\n        message: message\r\n      }\r\n    )\r\n    setTimeout(()=> setappMessage({type:'', message:''}), 5000)\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={appMessage.message} type={appMessage.type} />\r\n      <section>\r\n        <Filter handleSearch={handleSearch}></Filter>\r\n      </section>\r\n      <section>\r\n        <h2>Phonebook</h2>\r\n        <h3>Add a new contact</h3>\r\n        <PersonForm handleSubmit={handleSubmit} handleNameChange={handleNameChange} handlePhoneChange={handlePhoneChange} name={newName} phone={newPhone}></PersonForm>\r\n      </section>\r\n      <section>\r\n        <h3>Numbers</h3>\r\n        <Persons persons={persons} searchText={searchText} handler={handleClick}/>\r\n      </section>\r\n\r\n\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}